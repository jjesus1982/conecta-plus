# ============================================
# Conecta Plus - Guardian - Configuração
# ============================================

# Configurações gerais
general:
  debug: false
  log_level: INFO
  timezone: America/Sao_Paulo

# Detector YOLO
detector:
  # Modelo a usar: yolov8n.pt (nano), yolov8s.pt (small),
  #                yolov8m.pt (medium), yolov8l.pt (large), yolov8x.pt (xlarge)
  model: yolov8n.pt

  # Thresholds
  confidence_threshold: 0.5
  iou_threshold: 0.45
  max_detections: 100

  # Device: auto, cpu, cuda, cuda:0
  device: auto

  # Precisão reduzida (FP16) - requer GPU
  half_precision: false

  # Tamanho da imagem para inferência
  image_size: 640

  # Classes a detectar (vazio = todas)
  # Exemplos: [0] = pessoa, [0, 2, 3, 5, 7] = pessoa, carro, moto, ônibus, caminhão
  classes_filter: []

# Streams de câmeras
streams:
  # Configurações padrão
  default:
    reconnect_attempts: 5
    reconnect_delay: 5
    buffer_size: 10
    skip_frames: 2  # Pular frames para melhor performance

  # HLS output
  hls:
    enabled: true
    segment_duration: 2
    playlist_size: 5
    output_dir: /opt/conecta-plus/integrations/cameras/hls

# Alertas
alerts:
  enabled: true
  cooldown_seconds: 60

  # Regras padrão
  rules:
    - name: pessoa_detectada
      classes: [person]
      min_confidence: 0.6
      min_count: 1
      cooldown: 30

    - name: veiculo_detectado
      classes: [car, truck, bus, motorcycle]
      min_confidence: 0.5
      min_count: 1
      cooldown: 60

  # Notificações
  notifications:
    telegram:
      enabled: false
      chat_ids: []

    whatsapp:
      enabled: false
      numbers: []

    email:
      enabled: false
      recipients: []

# Gravação
recording:
  enabled: false
  output_dir: /opt/conecta-plus/guardian/recordings
  format: mp4
  max_duration: 300  # segundos
  pre_record: 10  # segundos antes do evento
  post_record: 30  # segundos depois do evento

# Snapshots
snapshots:
  enabled: true
  output_dir: /opt/conecta-plus/guardian/snapshots
  on_detection: true
  interval: 0  # 0 = apenas em detecções, >0 = intervalo em segundos
  format: jpg
  quality: 90

# API
api:
  host: 0.0.0.0
  port: 8001
  cors_origins:
    - http://localhost:3000
    - http://localhost:8000

# Performance
performance:
  max_concurrent_streams: 4
  detection_queue_size: 100
  worker_threads: 2
